<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.41">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Helvetica; color: #000000}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #000000; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #000000}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica; color: #000000}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000; min-height: 12.0px}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0000bf}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #007300}
span.s1 {font: 14.0px Helvetica}
span.s2 {color: #000000}
span.s3 {color: #0000bf}
span.s4 {color: #606060}
span.s5 {color: #007300}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>Locator</b></p>
<p class="p2"><br></p>
<p class="p3"><b>superclass: Object</b></p>
<p class="p2"><br></p>
<p class="p3">A class for virtual spatialization in stereo, using delays and amplitude distances.</p>
<p class="p2"><br></p>
<p class="p4"><b><i>Class Methods</i></b></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b><span class="Apple-tab-span">	</span>*new(right_speaker, measurement_distance)</b></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Create a new Locator object where the left speaker is at (0,0) and the</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>right speaker is at (right_speaker, 0).<span class="Apple-converted-space">  </span>right_speaker should be the</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>distance, in meters, between the two speakers.<span class="Apple-converted-space">  </span>measurement_distance</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>is the minimum y-coordinate for the virtual location of spatialized sounds.</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p4"><b><i>Instance Methods</i></b></p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span><b>compute_stereo_information(x_coordinate, y_coordinate, amp)</b></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Computes the amplitude and delays for the left and right speaker for a sound</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>located at (<i>x_coordinate</i>, <i>y_coordinate</i>), behind the speakers.<span class="Apple-converted-space">  </span>The</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>amplitude for the louder speaker is <i>amp</i> adjusted for the distance <i>y_coordinate</i>.</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>The amplitude for the quieter speaker is reduced based on the difference</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>in distance between the location and the speakers.<span class="Apple-converted-space">  </span>Returns this.</p>
<p class="p2"><br></p>
<p class="p3"><span class="Apple-tab-span">	</span><b>left_amp()</b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span>Return the last computed amplitude for the left speaker, or nil if there has</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>been no computation so far</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><b><span class="Apple-tab-span">	</span>right_amp()</b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span>Return the last computed amplitude for the right speaker, or nil if there has</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>been no computation so far</p>
<p class="p2"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span>left_delay_time()</b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span>Return the last computed delay time in seconds for the left speaker, or nil if there has</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>been no computation so far</p>
<p class="p2"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span>right_delay_time()</b></p>
<p class="p3"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span>Return the last computed delay time in seconds for the right speaker, or nil if there has</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>been no computation so far</p>
<p class="p2"><br></p>
<p class="p3"><span class="s1"><span class="Apple-tab-span">	</span></span><b>make_a_line(number, distance_behind, amp)</b></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Create an array of Locator objects corresponding to <i>number</i> virtual locations, equally<span class="Apple-converted-space"> </span></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>spaced <i>distance_behind</i> meters behind the speaker locations.<span class="Apple-converted-space">  </span>The created Locators</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>hold delay and amplitude information for each virtual location.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span><b>get_stereo_information(x_coordinate, y_coordinate, amp)</b></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Computes the distance, amplitude and delays for the left and right speaker for a sound</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>located at (<i>x_coordinate</i>, <i>y_coordinate</i>), behind the speakers.<span class="Apple-converted-space">  </span>The</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>amplitude for the louder speaker is <i>amp</i> adjusted for the distance <i>y_coordinate</i>.</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>The amplitude for the quieter speaker is reduced based on the difference</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>in distance between the location and the speakers.<span class="Apple-converted-space">  </span>Distances are in meters,</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>time is in seconds.</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Returns an array: [left_distance, left_delay_time, left_amp, right_distance,</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>right_delay_time, right_amp]</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// create a Locator with the speakers places 3 meters apart</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>l = <span class="s3">Locator</span>.new(3, 0.5);</p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">SynthDef</span>(<span class="s4">"help-locator"</span>, {<span class="s3">arg</span> out = 0, freq = 440, delay_time_left, left_amp,</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>delay_time_right, right_amp;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">var</span> ping, env, left, right;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>env = <span class="s3">EnvGen</span>.kr(<span class="s3">Env</span>.perc(0.001, 1, 1, -8), doneAction: 2);</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>ping<span class="Apple-converted-space">  </span>= <span class="s3">Klang</span>.ar(`[ [freq, freq * 3/2, freq * 7/5],[0.33, 0.33, 0.33]]) * env;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// put the left channel thru a delay line and adjust the amplitude</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>left = <span class="s3">DelayC</span>.ar(ping, 0.05, delay_time_left, left_amp);</p>
<p class="p7"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// put the right channel through a delay line and adjust the amplitude</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>right = <span class="s3">DelayC</span>.ar(ping, 0.05, delay_time_right, right_amp);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Out</span>.ar(out, [left, right]);</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).store;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Move the virtual location around randomly in a 3.0 x 2.5 meter rectangle</p>
<p class="p7"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// behind the speakers</p>
<p class="p8"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>Pbind<span class="s2"> (</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s5">\freq</span>,<span class="Apple-tab-span">	</span> <span class="Apple-converted-space">  <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s3">Prand</span>([220, 440, 330], <span class="s3">inf</span>),</p>
<p class="p9"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s5">\instrument</span><span class="s2">, <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>"help-locator"<span class="s2">,</span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[</span>\left_distance<span class="s2">,<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>\left_delay_time<span class="s2">,<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>\left_amp<span class="s2">,<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>\right_distance<span class="s2">,</span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>\right_delay_time<span class="s2">,<span class="Apple-converted-space"> </span></span></p>
<p class="p10"><span class="s2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>\right_amp<span class="s2">],<span class="Apple-tab-span">	</span></span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3">Pfunc</span>({ l.get_stereo_information((0.5 + 2.5.rand),<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(3.0.rand), 1.0)})</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>).play</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span>)</p>
</body>
</html>
